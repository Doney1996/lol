webpackJsonp([1],{AKd7:function(e,t){},NHnr:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=l("VU/8")({name:"App"},o,!1,function(e){l("p/0W")},null,null).exports,r=l("/ocq"),a=l("mtWM"),s=l.n(a),c=l("zL8q"),u=l.n(c),p={name:"HelloWorld",data:function(){return{position:-1,onlyShowEnable:!0,selectTier:0,p1:null,p2:null,p3:null,p4:null,p5:null,p1hero:null,p2hero:null,p3hero:null,p4hero:null,p5hero:null,showJieSuan:!1,options:[{label:"全部",value:0},{label:"T1",value:1},{label:"T2",value:2},{label:"T3",value:3},{label:"T4",value:4},{label:"T5",value:5}],heroList:[],showList:[],hideList:[],top:[],result:[],price:10}},computed:{canSelectHero:function(){return this.heroList.filter(function(e){return!e.disable}).length}},created:function(){this.getHero(),setInterval(this.getHero,3e4)},methods:{handleTier:function(e,t){return console.log(e.tier),"T"+e.tier},filter:function(){var e=this.position,t=this.onlyShowEnable,l=this.selectTier,i=this.heroList;i=i.filter(function(t){return-1!==(t.position+"").indexOf(e+"")||-1===e}),console.log(i),t&&(i=i.filter(function(e){return!e.disable})),console.log(l),i=i.filter(function(e){return e.tier>=l}),this.showList=i},resetAll:function(){s.a.post("/v1/enable").then(function(e){alert("重置成功")})},openDialog:function(){this.showJieSuan=!0,this.p1=null,this.p2=null,this.p3=null,this.p4=null,this.p5=null,this.p1hero=null,this.p2hero=null,this.p3hero=null,this.p4hero=null,this.p5hero=null,this.result=[]},submit:function(){var e=this;if(this.result.length<1)alert("请先计算");else{var t=!1,l=void 0;this.result.forEach(function(i){var o=e.heroList.filter(function(e){return e.id===i.hero})[0];o.disable&&(alert("英雄："+o.name+"已使用过"),t=!0),l===i.hero&&(alert("不能使用同样的英雄"),t=!0),l=i.hero}),t||s.a.post("/v1/jiesuan",this.result).then(function(e){alert("提交成功")})}},getHeroNameById:function(e){return this.heroList.filter(function(t){return t.id===e})[0].name},jisuan:function(){var e=this;this.result=[];var t=[];this.p1&&t.push({score:parseFloat(this.p1),hero:this.p1hero,name:this.getHeroNameById(this.p1hero)}),this.p2&&t.push({score:parseFloat(this.p2),hero:this.p2hero,name:this.getHeroNameById(this.p2hero)}),this.p3&&t.push({score:parseFloat(this.p3),hero:this.p3hero,name:this.getHeroNameById(this.p3hero)}),this.p4&&t.push({score:parseFloat(this.p4),hero:this.p4hero,name:this.getHeroNameById(this.p4hero)}),this.p5&&t.push({score:parseFloat(this.p5),hero:this.p5hero,name:this.getHeroNameById(this.p5hero)}),t.sort(function(e,t){return e.score-t.score}),t.reverse();t.forEach(function(l){var i=0;t.forEach(function(t){var o=(10*l.score-10*t.score)/10;o<0?o%1!=0&&(o=Math.ceil((10*o-10)/10)):o=Math.ceil(o),i+=o*e.price}),l.subtotal=i,l.subScore=i/e.price}),this.result=t,console.log(this.result,"result")},showAll:function(){this.showList=this.heroList,this.filterHero()},sort:function(e){return e.sort(function(e,t){return e.index-t.index})},getHero:function(){var e=c.Loading.service({fullscreen:!0}),t=this;s.a.get("/v1/getAllHero").then(function(e){var l=e.data,i=l.length/5;l=l.map(function(e,t){var l=Math.ceil((t+1)/i);return{id:e.id,index:e.sort,name:e.heroName,position:e.position,y:e.imgPosition,disable:e.disable,sum:e.sum,count:e.count,tier:l}}),t.heroList=l}).finally(function(){t.filter(),e.close()})}}},h={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticStyle:{float:"left",width:"30%"}},[l("h3",{staticStyle:{"margin-left":"10%"}},[e._v("英雄层级排行榜")]),e._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.heroList}},[l("el-table-column",{attrs:{prop:"name",label:"英雄",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"count",label:"登场次数",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{formatter:e.handleTier,prop:"tier",width:"100",label:"层级"}}),e._v(" "),l("el-table-column",{attrs:{prop:"sum",label:"赢得总金额",width:"100"}})],1)],1),e._v(" "),l("div",{staticStyle:{width:"630px",float:"right","margin-right":"10%"}},[l("div",{staticStyle:{margin:"10px"}},[l("div",[l("el-button",{attrs:{size:"mini"},on:{click:function(t){e.position=-1,e.filter()}}},[e._v("全部")]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.position=0,e.filter()}}},[e._v("上单")]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.position=1,e.filter()}}},[e._v("打野")]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){e.position=2,e.filter()}}},[e._v("中单")]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){e.position=3,e.filter()}}},[e._v("ADC")]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){e.position=4,e.filter()}}},[e._v("辅助")]),e._v(" "),l("div",{staticStyle:{margin:"10px",float:"right"}},[l("el-button",{on:{click:e.openDialog}},[e._v("游戏结算")])],1)],1),e._v(" "),l("div",{staticStyle:{"margin-top":"10px"}},[e._v("\n      层级：\n      "),l("el-select",{attrs:{change:e.filter,size:"mini",placeholder:"请选择层级"},model:{value:e.selectTier,callback:function(t){e.selectTier=t},expression:"selectTier"}},e._l(e.options,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),l("el-checkbox",{on:{change:e.filter},model:{value:e.onlyShowEnable,callback:function(t){e.onlyShowEnable=t},expression:"onlyShowEnable"}},[e._v("只显示可用")]),e._v(" "),l("div",{staticStyle:{"font-size":"10px",color:"gray"}},[e._v("剩余英雄数量："+e._s(e.canSelectHero))])],1)]),e._v(" "),l("div",e._l(e.showList,function(t){return l("div",{key:t.index,staticClass:"hero",class:{gray:t.disable},style:{backgroundPosition:"0px -"+t.y+"px"}},[l("div",{staticClass:"hero-name"},[e._v(e._s(t.name))])])}),0)]),e._v(" "),l("el-dialog",{attrs:{title:"提示",visible:e.showJieSuan,width:"80%"},on:{"update:visible":function(t){e.showJieSuan=t}}},[l("div",{staticStyle:{height:"400px"}},[l("div",{staticStyle:{float:"left",right:"100px"}},[l("div",[e._v("\n      价格："+e._s(e.price+" RMB")),l("el-slider",{staticStyle:{width:"300px"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1),e._v(" "),l("div",[l("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"评分"},model:{value:e.p1,callback:function(t){e.p1=t},expression:"p1"}}),e._v(" "),l("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.p1hero,callback:function(t){e.p1hero=t},expression:"p1hero"}},e._l(e.heroList,function(e){return l("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),l("div",[l("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"评分"},model:{value:e.p2,callback:function(t){e.p2=t},expression:"p2"}}),e._v(" "),l("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.p2hero,callback:function(t){e.p2hero=t},expression:"p2hero"}},e._l(e.heroList,function(e){return l("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),l("div",[l("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"评分"},model:{value:e.p3,callback:function(t){e.p3=t},expression:"p3"}}),e._v(" "),l("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.p3hero,callback:function(t){e.p3hero=t},expression:"p3hero"}},e._l(e.heroList,function(e){return l("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),l("div",[l("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"评分"},model:{value:e.p4,callback:function(t){e.p4=t},expression:"p4"}}),e._v(" "),l("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.p4hero,callback:function(t){e.p4hero=t},expression:"p4hero"}},e._l(e.heroList,function(e){return l("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),l("div",[l("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"评分"},model:{value:e.p5,callback:function(t){e.p5=t},expression:"p5"}}),e._v(" "),l("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.p5hero,callback:function(t){e.p5hero=t},expression:"p5hero"}},e._l(e.heroList,function(e){return l("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),l("el-button",{staticStyle:{"margin-top":"5px"},on:{click:e.jisuan}},[e._v("计算")]),e._v(" "),l("el-button",{staticStyle:{"margin-top":"5px"},on:{click:e.submit}},[e._v("提交")])],1),e._v(" "),l("div",{staticStyle:{float:"right",left:"5px"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.result}},[l("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),l("el-table-column",{attrs:{prop:"name",label:"英雄",width:"150"}}),e._v(" "),l("el-table-column",{attrs:{prop:"score",label:"评分",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"subScore",label:"得分",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"subtotal",label:"赢得总金额",width:"100"}})],1)],1)]),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{on:{click:e.resetAll}},[e._v("重置所有英雄")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var v=l("VU/8")(p,h,!1,function(e){l("AKd7")},"data-v-0e261542",null).exports;i.default.use(r.a);var d=new r.a({routes:[{path:"/",name:"Man",component:v}]});l("tvR6");i.default.config.productionTip=!1,i.default.use(u.a),new i.default({el:"#app",router:d,components:{App:n},template:"<App/>"})},"p/0W":function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f7bead00404180938935.js.map