webpackJsonp([1],{NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=i("VU/8")({name:"App"},n,!1,function(e){i("p/0W")},null,null).exports,r=i("/ocq"),a=i("mtWM"),s=i.n(a),u=i("zL8q"),c=i.n(u),p={name:"HelloWorld",data:function(){return{position:-1,showHero:0,selectTier:0,mini:["medium","mini","mini","mini","mini","mini"],p1:null,p2:null,p3:null,p4:null,p5:null,p1hero:null,p2hero:null,p3hero:null,p4hero:null,p5hero:null,showJieSuan:!1,filterOptions:[{label:"全部",value:0},{label:"可用",value:1},{label:"禁用",value:2}],options:[{label:"全部",value:0},{label:"T1",value:1},{label:"T2",value:2},{label:"T3",value:3},{label:"T4",value:4},{label:"T5",value:5}],heroList:[],showList:[],hideList:[],top:[],result:[],price:10}},computed:{canSelectHero:function(){return this.heroList.filter(function(e){return!e.disable}).length}},created:function(){this.getHero(),setInterval(this.getHero,3e4)},watch:{selectTier:function(){this.filter()},showHero:function(){this.filter()}},methods:{dealBtn:function(e){this.mini=this.mini.map(function(e){return"mini"}),this.mini[e]="medium"},handleTier:function(e,t){return"T"+e.tier},filter:function(){var e=this,t=this.position,i=this.heroList;i=i.filter(function(e){return-1!==(e.position+"").indexOf(t+"")||-1===t}),0!==this.showHero&&(i=i.filter(function(t){return t.disable===!(1===e.showHero)})),console.log(i),i=i.filter(function(t){return t.tier>=e.selectTier}),console.log(i),this.showList=i},resetAll:function(){s.a.post("/v1/enable").then(function(e){alert("重置成功")})},openDialog:function(){this.showJieSuan=!0,this.p1=null,this.p2=null,this.p3=null,this.p4=null,this.p5=null,this.p1hero=null,this.p2hero=null,this.p3hero=null,this.p4hero=null,this.p5hero=null,this.result=[]},submit:function(){var e=this;if(this.result.length<1)alert("请先计算");else{var t=!1,i=void 0;this.result.forEach(function(l){var n=e.heroList.filter(function(e){return e.id===l.hero})[0];n.disable&&(alert("英雄："+n.name+"已使用过"),t=!0),i===l.hero&&(alert("不能使用同样的英雄"),t=!0),i=l.hero}),t||s.a.post("/v1/jiesuan",this.result).then(function(e){alert("提交成功")})}},getHeroNameById:function(e){return this.heroList.filter(function(t){return t.id===e})[0].name},jisuan:function(){var e=this;this.result=[];var t=[];this.p1&&t.push({score:parseFloat(this.p1),hero:this.p1hero,name:this.getHeroNameById(this.p1hero)}),this.p2&&t.push({score:parseFloat(this.p2),hero:this.p2hero,name:this.getHeroNameById(this.p2hero)}),this.p3&&t.push({score:parseFloat(this.p3),hero:this.p3hero,name:this.getHeroNameById(this.p3hero)}),this.p4&&t.push({score:parseFloat(this.p4),hero:this.p4hero,name:this.getHeroNameById(this.p4hero)}),this.p5&&t.push({score:parseFloat(this.p5),hero:this.p5hero,name:this.getHeroNameById(this.p5hero)}),t.sort(function(e,t){return e.score-t.score}),t.reverse();t.forEach(function(i){var l=0;t.forEach(function(t){var n=(10*i.score-10*t.score)/10;n<0?n%1!=0&&(n=Math.ceil((10*n-10)/10)):n=Math.ceil(n),l+=n*e.price}),i.subtotal=l,i.subScore=l/e.price}),this.result=t},sort:function(e){return e.sort(function(e,t){return e.index-t.index})},getHero:function(){var e=u.Loading.service({fullscreen:!0}),t=this;s.a.get("/v1/getAllHero").then(function(e){var i=e.data,l=(i=i.sort(function(e,t){return t.sum-e.sum})).length/5;i=i.map(function(e,t){var i=Math.ceil((t+1)/l);return{id:e.id,index:e.sort,name:e.heroName,position:e.position,y:e.imgPosition,disable:e.disable,sum:e.sum,count:e.count,tier:i}}),t.heroList=i}).finally(function(){t.filter(),e.close()})}}},h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"margin-left":"5%","margin-right":"5%"}},[i("div",{staticStyle:{float:"left",width:"500px"}},[i("h3",[e._v("英雄层级排行榜")]),e._v(" "),i("el-table",{attrs:{data:e.heroList}},[i("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"英雄",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"count",label:"登场次数",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{formatter:e.handleTier,prop:"tier",width:"100",label:"层级"}}),e._v(" "),i("el-table-column",{attrs:{prop:"sum",label:"赢得总金额",width:"100"}})],1)],1),e._v(" "),i("div",{staticStyle:{width:"630px",float:"right","margin-right":"10%"}},[i("div",{staticStyle:{margin:"10px"}},[i("div",[i("el-button",{attrs:{size:e.mini[0],type:"mini"===e.mini[0]?"primary":"danger"},on:{click:function(t){e.position=-1,e.filter(),e.dealBtn(0)}}},[e._v("全部")]),e._v(" "),i("el-button",{attrs:{size:e.mini[1],type:"mini"===e.mini[1]?"primary":"danger"},on:{click:function(t){e.position=0,e.filter(),e.dealBtn(1)}}},[e._v("上单")]),e._v(" "),i("el-button",{attrs:{size:e.mini[2],type:"mini"===e.mini[2]?"primary":"danger"},on:{click:function(t){e.position=1,e.filter(),e.dealBtn(2)}}},[e._v("打野")]),e._v(" "),i("el-button",{attrs:{size:e.mini[3],type:"mini"===e.mini[3]?"primary":"danger"},on:{click:function(t){e.position=2,e.filter(),e.dealBtn(3)}}},[e._v("中单")]),e._v(" "),i("el-button",{attrs:{size:e.mini[4],type:"mini"===e.mini[4]?"primary":"danger"},on:{click:function(t){e.position=3,e.filter(),e.dealBtn(4)}}},[e._v("ADC")]),e._v(" "),i("el-button",{attrs:{size:e.mini[5],type:"mini"===e.mini[5]?"primary":"danger"},on:{click:function(t){e.position=4,e.filter(),e.dealBtn(5)}}},[e._v("辅助")]),e._v(" "),i("div",{staticStyle:{margin:"10px",float:"right"}},[i("el-button",{on:{click:e.openDialog}},[e._v("游戏结算")])],1)],1),e._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},[e._v("\n      层级：\n      "),i("el-select",{attrs:{size:"mini",placeholder:"请选择层级"},model:{value:e.selectTier,callback:function(t){e.selectTier=t},expression:"selectTier"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v("\n      过滤条件：\n      "),i("el-select",{attrs:{size:"mini",placeholder:"显示条件"},model:{value:e.showHero,callback:function(t){e.showHero=t},expression:"showHero"}},e._l(e.filterOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),i("div",{staticStyle:{"font-size":"10px",color:"gray","padding-top":"10px"}},[e._v("剩余英雄数量："+e._s(e.canSelectHero))])],1)]),e._v(" "),i("div",e._l(e.showList,function(t){return i("div",{key:t.index,staticClass:"hero",class:{gray:t.disable},style:{backgroundPosition:"0px -"+t.y+"px"}},[i("div",{staticClass:"hero-name"},[e._v(e._s(t.name))])])}),0)]),e._v(" "),i("el-dialog",{attrs:{title:"提示",visible:e.showJieSuan,width:"80%"},on:{"update:visible":function(t){e.showJieSuan=t}}},[i("div",{staticStyle:{height:"400px"}},[i("div",{staticStyle:{float:"left",right:"100px"}},[i("div",[e._v("\n      价格："+e._s(e.price+" RMB")),i("el-slider",{staticStyle:{width:"300px"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1),e._v(" "),i("div",[i("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"评分"},model:{value:e.p1,callback:function(t){e.p1=t},expression:"p1"}}),e._v(" "),i("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.p1hero,callback:function(t){e.p1hero=t},expression:"p1hero"}},e._l(e.heroList,function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("div",[i("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"评分"},model:{value:e.p2,callback:function(t){e.p2=t},expression:"p2"}}),e._v(" "),i("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.p2hero,callback:function(t){e.p2hero=t},expression:"p2hero"}},e._l(e.heroList,function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("div",[i("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"评分"},model:{value:e.p3,callback:function(t){e.p3=t},expression:"p3"}}),e._v(" "),i("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.p3hero,callback:function(t){e.p3hero=t},expression:"p3hero"}},e._l(e.heroList,function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("div",[i("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"评分"},model:{value:e.p4,callback:function(t){e.p4=t},expression:"p4"}}),e._v(" "),i("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.p4hero,callback:function(t){e.p4hero=t},expression:"p4hero"}},e._l(e.heroList,function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("div",[i("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"评分"},model:{value:e.p5,callback:function(t){e.p5=t},expression:"p5"}}),e._v(" "),i("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.p5hero,callback:function(t){e.p5hero=t},expression:"p5hero"}},e._l(e.heroList,function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-button",{staticStyle:{"margin-top":"5px"},on:{click:e.jisuan}},[e._v("计算")]),e._v(" "),i("el-button",{staticStyle:{"margin-top":"5px"},on:{click:e.submit}},[e._v("提交")])],1),e._v(" "),i("div",{staticStyle:{float:"right",left:"5px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.result}},[i("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"英雄",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"score",label:"评分",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"subScore",label:"得分",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"subtotal",label:"赢得总金额",width:"100"}})],1)],1)]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{on:{click:e.resetAll}},[e._v("重置所有英雄")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=i("VU/8")(p,h,!1,function(e){i("mVwt")},"data-v-753fab41",null).exports;l.default.use(r.a);var v=new r.a({routes:[{path:"/",name:"Man",component:d}]});i("tvR6");l.default.config.productionTip=!1,l.default.use(c.a),new l.default({el:"#app",router:v,components:{App:o},template:"<App/>"})},mVwt:function(e,t){},"p/0W":function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9abb0dd7c5e0cdb01129.js.map